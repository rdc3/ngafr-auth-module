{"version":3,"file":"ngafr-authentication.js","sources":["../../../projects/ngafr-authentication/src/lib/ngafr-authentication.service.ts","../../../projects/ngafr-authentication/src/lib/ngafr-authentication.component.ts","../../../projects/ngafr-authentication/src/lib/ngafr-authentication.directive.ts","../../../projects/ngafr-authentication/src/lib/ngafr-firebase-config.service.ts","../../../projects/ngafr-authentication/src/lib/ngafr-authentication.module.ts"],"names":["firebase.default","firebaseui.auth"],"mappings":"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","sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { FirebaseUISignInSuccessWithAuthResult, FirebaseUISignInFailure } from 'firebaseui-angular';\r\nimport { AngularFireAuth } from '@angular/fire/auth';\r\nimport { map, catchError } from 'rxjs/operators';\r\nimport { of, Observable, BehaviorSubject } from 'rxjs';\r\nimport { User } from '@firebase/auth-types';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\n\r\nexport class NgafrAuthenticationService {\r\n  private _loggedIn = false;\r\n  private _user: User = null;\r\n  loggedIn: BehaviorSubject<boolean> = new BehaviorSubject(this._loggedIn);\r\n  user: BehaviorSubject<User> = new BehaviorSubject(this._user);\r\n  hideLogOutButton$: BehaviorSubject<boolean> = new BehaviorSubject(false);\r\n\r\n  constructor(private afAuth: AngularFireAuth) { }\r\n\r\n  isUserLoggedIn(): Observable<void | User> {\r\n      return this.afAuth.authState.pipe(map((fBaseUser: User) => {\r\n        console.log('User: ', (fBaseUser && fBaseUser.email) ? fBaseUser.displayName : 'Guest');\r\n        this._loggedIn = (!!fBaseUser && !!fBaseUser.email);\r\n        this._user = fBaseUser;\r\n        if (this.loggedIn.value !== this._loggedIn)\r\n          this.loggedIn.next(this._loggedIn);\r\n        this.user.next(fBaseUser);\r\n        return fBaseUser;\r\n      }),\r\n        catchError((e) => of(console.log('exception:', e))\r\n      ));\r\n  }\r\n\r\n  logout() {\r\n    this.loggedIn.next(false);\r\n    this.afAuth.signOut();\r\n  }\r\n\r\n  hideLogOutButton(hide: boolean) {\r\n    this.hideLogOutButton$.next(hide);\r\n  }\r\n\r\n  loginSuccessCallback(data: FirebaseUISignInSuccessWithAuthResult) {\r\n    this._loggedIn = true;\r\n  }\r\n\r\n  loginErrorCallback(data: FirebaseUISignInFailure) {\r\n    this._loggedIn = false;\r\n  }\r\n}\r\n","import { Component, ViewEncapsulation, ViewChild, TemplateRef, OnInit, AfterViewInit, ChangeDetectorRef } from '@angular/core';\r\nimport { NgafrAuthenticationService } from './ngafr-authentication.service';\r\n\r\n@Component({\r\n  selector: 'lib-ngafr-authentication',\r\n  template: `\r\n    <ng-template #ngafrAuthElement>\r\n      <firebase-ui (signInSuccessWithAuthResult)=\"this.ngafrAuth.loginSuccessCallback($event)\"\r\n                   (signInFailure)=\"this.ngafrAuth.loginErrorCallback($event)\"></firebase-ui>\r\n      <button *ngIf=\"loggedIn && !hideLogOutButton\" (click)=\"this.ngafrAuth.logout()\">Logout</button>\r\n    </ng-template>\r\n  `,\r\n  styleUrls: [\r\n    '../../../../node_modules/firebaseui/dist/firebaseui.css'\r\n  ],\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\n\r\nexport class NgafrAuthenticationComponent {\r\n  @ViewChild('ngafrAuthElement', { static: true }) ngafrAuthElement: TemplateRef<any>;\r\n  public loggedIn = false;\r\n  public hideLogOutButton = false;\r\n  constructor(\r\n    public ngafrAuth: NgafrAuthenticationService,\r\n    private cdr: ChangeDetectorRef\r\n  ) {\r\n      console.log('in On Init');\r\n      this.ngafrAuth.isUserLoggedIn().subscribe(user => {\r\n        if (user) {\r\n          this.loggedIn = true;\r\n        } else {\r\n          this.loggedIn = false;\r\n        }\r\n      });\r\n      this.ngafrAuth.hideLogOutButton$.subscribe(hide => {\r\n        this.hideLogOutButton = hide\r\n        this.cdr.markForCheck();\r\n      });\r\n    \r\n  }\r\n}\r\n","import { NgafrAuthenticationService } from './ngafr-authentication.service';\r\nimport {\r\n    Directive, ComponentFactoryResolver, ViewContainerRef, ChangeDetectorRef,\r\n    EventEmitter, Output, Input\r\n} from '@angular/core';\r\nimport { OnInit, AfterViewInit } from '@angular/core';\r\nimport { NgafrAuthenticationComponent } from './ngafr-authentication.component';\r\nimport { User } from '@firebase/auth-types';\r\n\r\n@Directive({\r\n    selector: '[ngafrAuth]',\r\n    exportAs: 'ngafrAuth'\r\n})\r\nexport class NgafrAuthDirective implements OnInit,  AfterViewInit {\r\n    @Input('ngafrAuth') ngafrAuth : string; \r\n    @Input('userLogOut') userLogOut : string; \r\n    @Input('hideDefaultLogOutButton') hideDefaultLogOutButton : string = 'false'; \r\n    @Output('userLoggedInEvent') userLoggedInEvent = new EventEmitter<{ isLoggedIn: boolean }>();\r\n    @Output('userEvent') userEvent = new EventEmitter<{ user: User }>();\r\n    private authTemplateComponent: NgafrAuthenticationComponent;\r\n\r\n    constructor(\r\n        private componentFactoryResolver: ComponentFactoryResolver,\r\n        private viewContainer: ViewContainerRef,\r\n        private cdr: ChangeDetectorRef,\r\n        private auth: NgafrAuthenticationService)\r\n    { \r\n        this.auth.loggedIn.subscribe(isLoggedIn => this.userLoggedInEvent.emit({ isLoggedIn: isLoggedIn }));\r\n        this.auth.user.subscribe(user => this.userEvent.emit({ user: user }));\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n        if (this.hideDefaultLogOutButton.toLowerCase() !== 'true' || this.hideDefaultLogOutButton.toLowerCase() !== 'false')\r\n            this.hideDefaultLogOutButton = 'false';\r\n        this.auth.hideLogOutButton(JSON.parse(this.hideDefaultLogOutButton));\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        const componentFactory = this.componentFactoryResolver.resolveComponentFactory(NgafrAuthenticationComponent);\r\n        const componentRef = componentFactory.create(this.viewContainer.injector);\r\n        this.authTemplateComponent = componentRef.instance;\r\n        this.viewContainer.createEmbeddedView(this.authTemplateComponent.ngafrAuthElement);\r\n        this.cdr.markForCheck();\r\n    }\r\n\r\n    logout() {\r\n        this.auth.logout();\r\n    }\r\n}\r\n\r\n\r\n","import { Injectable } from '@angular/core';\r\nimport { IFirebaseAuthProviders } from './ngafr-firebase-config.model';\r\nimport * as firebase from 'firebase';\r\nimport * as firebaseui from 'firebaseui';\r\n\r\n@Injectable()\r\nexport class FirebaseConfigService {\r\n\r\n  static firebaseUiAuthConfig: firebaseui.auth.Config = {\r\n    signInFlow: 'popup',\r\n    signInOptions: [],\r\n    // tosUrl: '<your-tos-link>',\r\n    // privacyPolicyUrl: '<your-privacyPolicyUrl-link>',\r\n    credentialHelper: firebaseui.auth.CredentialHelper.NONE\r\n  };\r\n\r\n  static getFirebaseUiAuthConfig(authProviders: IFirebaseAuthProviders) {\r\n    if (authProviders.googleAuthProvider) {\r\n      FirebaseConfigService.firebaseUiAuthConfig.signInOptions.push(firebase.default.auth.GoogleAuthProvider.PROVIDER_ID);\r\n    }\r\n    if (authProviders.facebookAuthProvider) {\r\n      FirebaseConfigService.firebaseUiAuthConfig.signInOptions.push({\r\n          scopes: [\r\n            'public_profile',\r\n            'email',\r\n            'user_likes',\r\n            'user_friends'\r\n          ],\r\n          customParameters: {\r\n            auth_type: 'reauthenticate'\r\n          },\r\n          provider: firebase.default.auth.FacebookAuthProvider.PROVIDER_ID\r\n        });\r\n     }\r\n    if (authProviders.emailAuthProvider) {\r\n      FirebaseConfigService.firebaseUiAuthConfig.signInOptions.push({\r\n        requireDisplayName: true,\r\n        provider: firebase.default.auth.EmailAuthProvider.PROVIDER_ID\r\n      });\r\n    }\r\n    if (authProviders.twitterAuthProvider) {\r\n      FirebaseConfigService.firebaseUiAuthConfig.signInOptions.push(firebase.default.auth.TwitterAuthProvider.PROVIDER_ID);\r\n     }\r\n    if (authProviders.githubAuthProvider) {\r\n      FirebaseConfigService.firebaseUiAuthConfig.signInOptions.push(firebase.default.auth.GithubAuthProvider.PROVIDER_ID);\r\n     }\r\n    if (authProviders.phoneAuthProvider) {\r\n      FirebaseConfigService.firebaseUiAuthConfig.signInOptions.push(firebase.default.auth.PhoneAuthProvider.PROVIDER_ID);\r\n     }\r\n    if (authProviders.anonymousAuthProvider) {\r\n      FirebaseConfigService.firebaseUiAuthConfig.signInOptions.push(firebaseui.auth.AnonymousAuthProvider.PROVIDER_ID);\r\n     }\r\n    return FirebaseConfigService.firebaseUiAuthConfig;\r\n  }\r\n\r\n}\r\n","import { BrowserModule } from '@angular/platform-browser';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { NgModule, InjectionToken, ModuleWithProviders } from '@angular/core';\r\nimport { FirebaseUIModule } from 'firebaseui-angular';\r\nimport { AngularFireModule } from '@angular/fire';\r\nimport { AngularFireAuthModule } from '@angular/fire/auth';\r\nimport { IFirebaseConf, IFirebaseAuthProviders } from './ngafr-firebase-config.model';\r\nimport { FirebaseConfigService } from './ngafr-firebase-config.service';\r\nimport { NgafrAuthDirective } from './ngafr-authentication.directive';\r\nimport { NgafrAuthenticationComponent } from './ngafr-authentication.component';\r\n\r\nexport const FirebaseConfigData = new InjectionToken<IFirebaseConf>('FIREBASECONF');\r\n\r\n\r\n@NgModule({\r\n  declarations: [NgafrAuthDirective, NgafrAuthenticationComponent],\r\n  imports: [\r\n    BrowserModule,\r\n    FormsModule,\r\n    AngularFireAuthModule,\r\n    FirebaseUIModule\r\n  ],\r\n  exports: [NgafrAuthDirective, NgafrAuthenticationComponent],\r\n  providers: [FirebaseConfigService],\r\n  entryComponents: [NgafrAuthenticationComponent]\r\n})\r\n\r\nexport class NgafrAuthenticationModule {\r\n  public static forRoot(firebaseConfig: IFirebaseConf, authProviders: IFirebaseAuthProviders): ModuleWithProviders<NgafrAuthenticationModule> {\r\n    const firebaseUiAuthConfig = FirebaseConfigService.getFirebaseUiAuthConfig(authProviders);\r\n    return {\r\n      ngModule: NgafrAuthenticationModule,\r\n      providers: [\r\n        FirebaseConfigService,\r\n        AngularFireModule.initializeApp(firebaseConfig).providers,\r\n        {provide: FirebaseConfigData, useValue: firebaseConfig},\r\n        FirebaseUIModule.forRoot(firebaseUiAuthConfig).providers\r\n      ]\r\n    };\r\n  }\r\n}\r\n\r\n\r\n"]}